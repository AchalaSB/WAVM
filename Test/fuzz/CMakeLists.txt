if(CMAKE_CXX_COMPILER_ID STREQUAL "Clang" AND ENABLE_LIBFUZZER)
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fsanitize=fuzzer")
	add_definitions(-DENABLE_LIBFUZZER=1)
else()
	add_definitions(-DENABLE_LIBFUZZER=0)
endif()

add_executable(fuzz fuzz.cpp)
target_link_libraries(fuzz Logging IR WAST WASM Runtime Emscripten ThreadTest)
set_target_properties(fuzz PROPERTIES FOLDER Testing)
